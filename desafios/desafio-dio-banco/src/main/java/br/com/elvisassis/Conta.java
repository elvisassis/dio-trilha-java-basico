package br.com.elvisassis;import br.com.elvisassis.exception.SaldoInsuficientException;public abstract class Conta implements IConta {    protected Integer agenecia;    protected Integer numero;    protected double saldo;    protected Cliente cliente;    protected double chequeEspecial;    protected double valorUsadoChequeEspecial;    private static Integer SEQUENCIAL = 1;    private static final Integer AGENCIA_PADRAO = 1;    public Conta(Cliente cliente, double saldo) {        this.agenecia = AGENCIA_PADRAO;        this.numero = SEQUENCIAL++;        this.cliente = cliente;        this.valorUsadoChequeEspecial = 0;        this.saldo = saldo;        valorChequeEspecial(saldo);    }    public int getNumeroConta() {        return this.numero;    }    @Override    public boolean sacar(double valor) throws SaldoInsuficientException {        if (valor <= saldo) {            saldo -= valor;            return true;        } else if (valor <= (saldo + chequeEspecial - valorUsadoChequeEspecial)) {            double restante = valor - saldo;            saldo = 0;            valorUsadoChequeEspecial += restante;            return true;        }        return false;    }    @Override    public double consultarSaldo() {        return saldo;    }    @Override    public double consultarChequeEspecial() {        return chequeEspecial;    }    @Override    public void depositar(double valor) {        this.saldo += valor;    }    @Override    public void transferir(double valor, IConta contaDestino) {        this.sacar(valor);        contaDestino.depositar(valor);    }    @Override    public boolean pagarBoleto(double valor) {        return sacar(valor);    }    protected void imprimirInfosComuns() {        System.out.println(String.format("Titular: %s", this.cliente.getNome()));        System.out.println(String.format("Agencia: %d", this.agenecia));        System.out.println(String.format("Numero: %d", this.numero));        System.out.println(String.format("Saldo: %.2f", this.saldo));        System.out.println(String.format("Cheque especial: %.2f", this.chequeEspecial));    }    private void valorChequeEspecial(double saldo) {        if (saldo <= 500.00)            this.chequeEspecial = 50.00;        else            this.chequeEspecial = saldo * 0.5;    }    public boolean estaUsandoChequeEspecial() {        return valorUsadoChequeEspecial > 0;    }}